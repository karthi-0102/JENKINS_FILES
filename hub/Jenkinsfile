pipeline{
    agent none
    

    stages{
       stage('Code-checkout'){
            environment {
                    CURRENT_HUB = "V2"
                    COVERAGE_THRESHOLD = 80
                    COVERAGE_MAX_DIFF = 1
            }
                    
            steps{
                dir('/tmp/hub-buildDir/hub'){
                    checkout scm         
                }  
            }
        }

        stage('install packages'){
            agent {
                docker{
                    image 'node:10.15.3'
                }
            }

            steps{
                dir('/tmp/hub-buildDir/hub'){
                    npm install
                }
            }
        }

    }   
}
